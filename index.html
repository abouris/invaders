<html><head><base href="https://spacegame.retro.ai/" /><title>Space Invaders - Classic Arcade</title><style>
body, html {
    margin: 0;
    padding: 0;
    height: 100vh;
    overflow: hidden;
    font-family: 'Courier New', monospace;
    background-color: black;
    background-image: url('https://i.ibb.co/h7wqh7J/Space-Invaders-1978-video-game-marquee-art-arcade.png');
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
}
.game-container {
    width: 100vw;
    height: 100vh;
    position: relative;
    display: flex;
    flex-direction: column;
}
.score-board {
    color: #fff;
    font-size: 24px;
    display: flex;
    justify-content: space-between;
    width: 100%;
    padding: 10px 20px;
    box-sizing: border-box;
    text-shadow: 2px 2px 4px rgba(0,0,0,0.7);
}
.invaders-grid {
    position: absolute;
    top: 20%;
    left: 50%;
    transform: translate(-50%, -50%);
    display: flex;
    flex-direction: column;
    align-items: center;
    transition: left 0.2s ease-in-out, top 0.2s ease-in-out;
}
.invaders-row {
    display: flex;
    justify-content: center;
    margin-bottom: 10px;
}
.invader {
    width: 48px;
    height: 32px;
    background-size: contain;
    background-repeat: no-repeat;
    image-rendering: pixelated;
    margin: 0 5px;
}
.invader-green { 
    background-image: url('https://i.ibb.co/7rwGy9C/Invader01-1.png');
    animation: greenInvaderAnimation 0.5s steps(1) infinite;
}
.invader-blue { 
    background-image: url('https://i.ibb.co/6DzNKKr/Invader02-1.png');
    animation: blueInvaderAnimation 0.5s steps(1) infinite;
}
.invader-pink { 
    background-image: url('https://i.ibb.co/GtWhtJd/Invader03-1.png');
    animation: pinkInvaderAnimation 0.5s steps(1) infinite;
}
@keyframes greenInvaderAnimation {
    0%, 100% { background-image: url('https://i.ibb.co/7rwGy9C/Invader01-1.png'); }
    50% { background-image: url('https://i.ibb.co/vQ2M6DJ/Invader01-2.png'); }
}
@keyframes blueInvaderAnimation {
    0%, 100% { background-image: url('https://i.ibb.co/6DzNKKr/Invader02-1.png'); }
    50% { background-image: url('https://i.ibb.co/ftMfYGR/Invader02-2.png'); }
}
@keyframes pinkInvaderAnimation {
    0%, 100% { background-image: url('https://i.ibb.co/GtWhtJd/Invader03-1.png'); }
    50% { background-image: url('https://i.ibb.co/XDc5j5z/Invader03-2.png'); }
}
.bunker {
    width: 88px;
    height: 64px;
    position: absolute;
    bottom: 100px;
}
.bunker-part {
    width: 11px;
    height: 8px;
    background-color: #00ff00;
    position: absolute;
}
.player {
    width: 52px;
    height: 32px;
    background-image: url('https://i.ibb.co/XyQMQ5p/Space-Invader-Player.png');
    background-size: contain;
    background-repeat: no-repeat;
    image-rendering: pixelated;
    position: absolute;
    bottom: 20px;
    transition: left 0.1s ease-out;
}
.bullet {
    width: 4px;
    height: 15px;
    background-color: #fff;
    position: absolute;
}
.alien-bullet {
    width: 6px;
    height: 12px;
    background-size: contain;
    background-repeat: no-repeat;
    image-rendering: pixelated;
    position: absolute;
    animation: alienBulletAnimation 0.2s steps(1) infinite;
}
@keyframes alienBulletAnimation {
    0%, 100% { background-image: url('https://i.ibb.co/s29FXkK/alienbullet01.png'); }
    50% { background-image: url('https://i.ibb.co/bFhXGmk/alienbullet02.png'); }
}
.mystery-ufo {
    width: 64px;
    height: 28px;
    background-image: url('https://i.ibb.co/vDsktLR/Mystery.png');
    background-size: contain;
    background-repeat: no-repeat;
    image-rendering: pixelated;
    position: absolute;
    top: 10px;
    left: -64px;
    filter: hue-rotate(320deg) saturate(200%) brightness(150%);
}
.lives-display {
    position: absolute;
    bottom: 10px;
    left: 10px;
    color: #fff;
    font-size: 24px;
    text-shadow: 2px 2px 4px rgba(0,0,0,0.7);
}
.life-icon {
    width: 26px;
    height: 16px;
    background-image: url('https://i.ibb.co/XyQMQ5p/Space-Invader-Player.png');
    background-size: contain;
    background-repeat: no-repeat;
    image-rendering: pixelated;
    display: inline-block;
    margin-left: 5px;
}
.game-over, .level-up {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    color: #fff;
    font-size: 48px;
    text-align: center;
    text-shadow: 2px 2px 4px rgba(0,0,0,0.7);
}
.restart-button, .next-level-button {
    margin-top: 20px;
    padding: 10px 20px;
    font-size: 24px;
    background-color: #00ff00;
    color: #000;
    border: none;
    cursor: pointer;
}
.player-explosion {
    width: 64px;
    height: 64px;
    position: absolute;
    bottom: 20px;
    background-image: url('https://i.ibb.co/xH2rTvX/Explosion02.gif');
    background-size: contain;
    background-repeat: no-repeat;
    image-rendering: pixelated;
}
</style><script type="text/javascript" nonce="3ef5692b142a4420908a6375302" src="//local.adguard.org?ts=1721928253771&amp;type=content-script&amp;dmn=party.websim.ai&amp;url=https%3A%2F%2Fparty.websim.ai%2Fapi%2Fv1%2Fsites%2FuTzp4pScoHuxCggZg%2Fhtml%3Fraw%3Dtrue&amp;app=com.google.Chrome&amp;css=3&amp;js=1&amp;rel=1&amp;rji=1&amp;sbe=1"></script>
<script type="text/javascript" nonce="3ef5692b142a4420908a6375302" src="//local.adguard.org?ts=1721928253771&amp;name=AdGuard%20Assistant&amp;name=AdGuard%20Extra&amp;type=user-script"></script></head><body>

<div class="game-container">
    <div class="score-board">
        <span id="scoreDisplay">SCORE:0</span>
        <span id="levelDisplay">LEVEL:1</span>
        <span id="highScoreDisplay">HIGHSCORE:0</span>
    </div>
    <div id="mysteryUfo" class="mystery-ufo"></div>
    <div id="invadersGrid" class="invaders-grid">
        <!-- Invaders will be dynamically added here -->
    </div>
    <div class="bunker" style="left: 10%;"></div>
    <div class="bunker" style="left: 30%;"></div>
    <div class="bunker" style="left: 50%;"></div>
    <div class="bunker" style="left: 70%;"></div>
    <div id="player" class="player"></div>
    <div class="lives-display">LIVES: <span id="livesIcons"></span></div>
</div>

<script>
const invadersGrid = document.getElementById('invadersGrid');
const mysteryUfo = document.getElementById('mysteryUfo');
const gameContainer = document.querySelector('.game-container');
const bunkers = document.querySelectorAll('.bunker');
const player = document.getElementById('player');
const scoreDisplay = document.getElementById('scoreDisplay');
const levelDisplay = document.getElementById('levelDisplay');
const highScoreDisplay = document.getElementById('highScoreDisplay');
const livesDisplay = document.getElementById('livesIcons');
let playerPosition = 50;
let keys = {};
let canShoot = true;
let activeBullet = null;
let score = 0;
let highScore = 0;
let lives = 3;
let gameOver = false;

let alienDirection = 1;
let alienPosition = 0;
let alienMoveSpeed = 10;
let alienMoveInterval = 250;
let alienVerticalMove = 5;
let originalRowCount = 5;
let currentRowCount = 5;
let aliensHit = 0;
let currentLevel = 1;

const galagaSounds = {
    backgroundMusic: new Audio('https://example.com/galaga_background.mp3'),
    playerShoot: new Audio('https://example.com/galaga_player_shoot.mp3'),
    enemyExplode: new Audio('https://example.com/galaga_enemy_explode.mp3'),
    playerExplode: new Audio('https://example.com/galaga_player_explode.mp3'),
    levelStart: new Audio('https://example.com/galaga_level_start.mp3'),
    gameOver: new Audio('https://example.com/galaga_game_over.mp3')
};

Object.values(galagaSounds).forEach(sound => {
    sound.load();
});

function startBackgroundMusic() {
    galagaSounds.backgroundMusic.loop = true;
    galagaSounds.backgroundMusic.volume = 0.5;
    galagaSounds.backgroundMusic.play();
}

function createInvaders() {
    invadersGrid.innerHTML = '';
    const invaderTypes = ['green', 'blue', 'blue', 'pink', 'pink'];
    invaderTypes.forEach((type, rowIndex) => {
        const row = document.createElement('div');
        row.className = 'invaders-row';
        for (let i = 0; i < 11; i++) {
            const invader = document.createElement('div');
            invader.className = `invader invader-${type}`;
            row.appendChild(invader);
        }
        invadersGrid.appendChild(row);
    });
}

function createBunkerParts() {
    bunkers.forEach(bunker => {
        bunker.innerHTML = '';
        for (let i = 0; i < 8; i++) {
            for (let j = 0; j < 8; j++) {
                if ((i === 0 && j === 0) || (i === 0 && j === 7) || (i === 7 && j === 0) || (i === 7 && j === 7)) continue;
                if (i >= 5 && (j === 3 || j === 4)) continue;
                const part = document.createElement('div');
                part.classList.add('bunker-part');
                part.style.left = `${j * 11}px`;
                part.style.top = `${i * 8}px`;
                bunker.appendChild(part);
            }
        }
    });
}

function moveAliens() {
    if (gameOver) return;

    const containerWidth = gameContainer.offsetWidth;
    const gridWidth = invadersGrid.offsetWidth;
    const maxMove = (containerWidth - gridWidth) / 2;

    alienPosition += alienMoveSpeed * alienDirection;

    if (alienPosition >= maxMove || alienPosition <= -maxMove) {
        alienDirection *= -1;
        const currentTop = parseFloat(invadersGrid.style.top) || 20;
        invadersGrid.style.top = `${currentTop + alienVerticalMove}%`;
        
        if (currentTop + alienVerticalMove > 70) {
            endGame(false);
            return;
        }
    }

    invadersGrid.style.left = `calc(50% + ${alienPosition}px)`;

    setTimeout(moveAliens, alienMoveInterval);
}

function spawnMysteryUfo() {
    if (gameOver) return;
    
    mysteryUfo.style.left = '-64px';
    
    let ufoPosition = -64;
    const moveUfo = setInterval(() => {
        ufoPosition += 2;
        mysteryUfo.style.left = `${ufoPosition}px`;
        
        if (ufoPosition > gameContainer.offsetWidth) {
            clearInterval(moveUfo);
            setTimeout(spawnMysteryUfo, Math.random() * 30000 + 15000);
        }
    }, 50);
}

function alienShoot() {
    if (gameOver) return;
    
    const aliens = document.querySelectorAll('.invader');
    const shootingAlien = aliens[Math.floor(Math.random() * aliens.length)];
    const alienRect = shootingAlien.getBoundingClientRect();

    const bullet = document.createElement('div');
    bullet.classList.add('alien-bullet');
    bullet.style.left = (alienRect.left + alienRect.width / 2 - 3) + 'px';
    bullet.style.top = (alienRect.bottom) + 'px';
    gameContainer.appendChild(bullet);

    const bulletInterval = setInterval(() => {
        if (gameOver) {
            clearInterval(bulletInterval);
            bullet.remove();
            return;
        }
        
        const bulletRect = bullet.getBoundingClientRect();
        bullet.style.top = (bulletRect.top + 5) + 'px';

        if (bulletRect.top > gameContainer.offsetHeight) {
            clearInterval(bulletInterval);
            bullet.remove();
        }

        checkBunkerCollision(bullet, bulletRect, bulletInterval);
        checkPlayerCollision(bullet, bulletRect, bulletInterval);
    }, 50);
}

function checkBunkerCollision(bullet, bulletRect, bulletInterval) {
    bunkers.forEach(bunker => {
        const bunkerParts = bunker.querySelectorAll('.bunker-part');
        bunkerParts.forEach(part => {
            const partRect = part.getBoundingClientRect();
            if (
                bulletRect.left < partRect.right &&
                bulletRect.right > partRect.left &&
                bulletRect.top < partRect.bottom &&
                bulletRect.bottom > partRect.top
            ) {
                clearInterval(bulletInterval);
                bullet.remove();
                part.remove();
                if (bullet.classList.contains('bullet')) {
                    activeBullet = null;
                    canShoot = true;
                }
                galagaSounds.enemyExplode.currentTime = 0;
                galagaSounds.enemyExplode.play();
            }
        });
    });
}

function movePlayer() {
    if (gameOver) return;
    
    const playerSpeed = 5;
    const containerWidth = gameContainer.offsetWidth;
    const playerWidth = player.offsetWidth;
    
    if (keys.ArrowLeft) {
        playerPosition = Math.max(0, playerPosition - playerSpeed);
    }
    if (keys.ArrowRight) {
        playerPosition = Math.min(containerWidth - playerWidth, playerPosition + playerSpeed);
    }
    
    player.style.left = `${playerPosition}px`;
}

function playerShoot() {
    if (gameOver) return;
    
    if (canShoot && !activeBullet) {
        canShoot = false;

        const bullet = document.createElement('div');
        bullet.classList.add('bullet');
        const playerRect = player.getBoundingClientRect();
        bullet.style.left = (playerRect.left + playerRect.width / 2 - 2) + 'px';
        bullet.style.bottom = '52px';
        gameContainer.appendChild(bullet);

        activeBullet = bullet;

        galagaSounds.playerShoot.currentTime = 0;
        galagaSounds.playerShoot.play();

        const bulletInterval = setInterval(() => {
            if (gameOver) {
                clearInterval(bulletInterval);
                bullet.remove();
                return;
            }
            
            const bulletRect = bullet.getBoundingClientRect();
            bullet.style.bottom = (parseFloat(bullet.style.bottom) + 20) + 'px';

            if (bulletRect.top <= 0) {
                clearInterval(bulletInterval);
                bullet.remove();
                activeBullet = null;
                canShoot = true;
            }

            checkBunkerCollision(bullet, bulletRect, bulletInterval);
            checkAlienCollision(bullet, bulletRect, bulletInterval);
            checkMysteryUfoCollision(bullet, bulletRect, bulletInterval);
        }, 20);

        setTimeout(() => { canShoot = true; }, 250);
    }
}

function checkAlienCollision(bullet, bulletRect, bulletInterval) {
    const aliens = document.querySelectorAll('.invader');
    aliens.forEach(alien => {
        const alienRect = alien.getBoundingClientRect();
        if (
            bulletRect.left < alienRect.right &&
            bulletRect.right > alienRect.left &&
            bulletRect.top < alienRect.bottom &&
            bulletRect.bottom > alienRect.top
        ) {
            clearInterval(bulletInterval);
            bullet.remove();
            alien.remove();
            activeBullet = null;
            canShoot = true;
            galagaSounds.enemyExplode.currentTime = 0;
            galagaSounds.enemyExplode.play();
            updateScore(50);
            
            aliensHit++;
            increaseAlienSpeed();
            
            checkRowDestroyed();
            
            if (document.querySelectorAll('.invader').length === 0) {
                levelUp();
            }
        }
    });
}

function checkRowDestroyed() {
    const rows = document.querySelectorAll('.invaders-row');
    rows.forEach(row => {
        if (row.children.length === 0) {
            row.remove();
            currentRowCount--;
        }
    });
}

function increaseAlienSpeed() {
    const speedIncrease = 1 - (aliensHit * 0.01);
    alienMoveInterval = Math.max(50, Math.floor(alienMoveInterval * speedIncrease));
}

function checkMysteryUfoCollision(bullet, bulletRect, bulletInterval) {
    const ufoRect = mysteryUfo.getBoundingClientRect();
    if (
        bulletRect.left < ufoRect.right &&
        bulletRect.right > ufoRect.left &&
        bulletRect.top < ufoRect.bottom &&
        bulletRect.bottom > ufoRect.top
    ) {
        clearInterval(bulletInterval);
        bullet.remove();
        activeBullet = null;
        canShoot = true;
        
        galagaSounds.enemyExplode.currentTime = 0;
        galagaSounds.enemyExplode.play();
        
        updateScore(200);
        
        mysteryUfo.style.display = 'none';
        
        setTimeout(() => {
            mysteryUfo.style.display = 'block';
            spawnMysteryUfo();
        }, Math.random() * 30000 + 15000);
    }
}

function checkPlayerCollision(bullet, bulletRect, bulletInterval) {
    const playerRect = player.getBoundingClientRect();
    if (
        bulletRect.left < playerRect.right &&
        bulletRect.right > playerRect.left &&
        bulletRect.top < playerRect.bottom &&
        bulletRect.bottom > playerRect.top
    ) {
        clearInterval(bulletInterval);
        bullet.remove();
        loseLife();
    }
}

function loseLife() {
    lives--;
    updateLivesDisplay();
    if (lives <= 0) {
        endGame(false);
    } else {
        player.style.display = 'none';
        const explosion = document.createElement('div');
        explosion.classList.add('player-explosion');
        explosion.style.left = player.style.left;
        gameContainer.appendChild(explosion);

        galagaSounds.playerExplode.currentTime = 0;
        galagaSounds.playerExplode.play();

        setTimeout(() => {
            explosion.remove();
            playerPosition = gameContainer.offsetWidth / 2 - player.offsetWidth / 2;
            player.style.left = `${playerPosition}px`;
            player.style.display = 'block';
        }, 1000);
    }
}

function levelUp() {
    currentLevel++;
    levelDisplay.textContent = `LEVEL:${currentLevel}`;
    
    const levelUpDiv = document.createElement('div');
    levelUpDiv.classList.add('level-up');
    levelUpDiv.innerHTML = `LEVEL ${currentLevel}`;
    
    const nextLevelButton = document.createElement('button');
    nextLevelButton.classList.add('next-level-button');
    nextLevelButton.textContent = 'NEXT LEVEL';
    nextLevelButton.onclick = startNextLevel;
    
    levelUpDiv.appendChild(nextLevelButton);
    gameContainer.appendChild(levelUpDiv);
    
    gameOver = true;

    galagaSounds.levelStart.currentTime = 0;
    galagaSounds.levelStart.play();
}

function startNextLevel() {
    gameOver = false;
    document.querySelector('.level-up').remove();
    
    alienMoveInterval = Math.max(50, alienMoveInterval - 25);
    alienMoveSpeed += 1;
    
    createInvaders();
    createBunkerParts();
    
    aliensHit = 0;
    currentRowCount = originalRowCount;
    
    invadersGrid.style.top = '20%';
    alienPosition = 0;
    alienDirection = 1;
    
    moveAliens();
}

function endGame(win) {
    gameOver = true;
    
    gameContainer.innerHTML = '';
    
    const gameOverDiv = document.createElement('div');
    gameOverDiv.classList.add('game-over');
    gameOverDiv.innerHTML = win ? 'YOU WIN!' : 'GAME OVER';
    
    const restartButton = document.createElement('button');
    restartButton.classList.add('restart-button');
    restartButton.textContent = 'RESTART';
    restartButton.onclick = () => {
        location.reload();
    };
    
    gameOverDiv.appendChild(restartButton);
    gameContainer.appendChild(gameOverDiv);

    galagaSounds.backgroundMusic.pause();
    galagaSounds.gameOver.play();
}

function updateScore(points) {
    score += points;
    scoreDisplay.textContent = `SCORE:${score}`;
    if (score > highScore) {
        highScore = score;
        highScoreDisplay.textContent = `HIGHSCORE:${highScore}`;
    }
}

function updateLivesDisplay() {
    livesDisplay.innerHTML = '';
    for (let i = 0; i < lives; i++) {
        const lifeIcon = document.createElement('span');
        lifeIcon.classList.add('life-icon');
        livesDisplay.appendChild(lifeIcon);
    }
}

document.addEventListener('keydown', (event) => {
    keys[event.code] = true;
    if (event.code === 'Space') {
        event.preventDefault();
        playerShoot();
    }
});

document.addEventListener('keyup', (event) => {
    keys[event.code] = false;
});

function gameLoop() {
    movePlayer();
    requestAnimationFrame(gameLoop);
}

createInvaders();
createBunkerParts();
moveAliens();
spawnMysteryUfo();
setInterval(alienShoot, 1000);
gameLoop();
updateLivesDisplay();
startBackgroundMusic();
</script>

</body></html>